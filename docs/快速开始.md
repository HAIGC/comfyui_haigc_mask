# 快速开始指南

## 🚀 5分钟上手

### 第一步：创建你的第一个遮罩

1. 在 ComfyUI 中右键 → Add Node → 遮罩处理/HAIGC → 遮罩生成器
2. 设置参数：
   ```
   画布宽度: 512
   画布高度: 512
   形状类型: 圆形
   半径: 0.5
   ```
3. 连接到"遮罩预览"节点查看结果

### 第二步：添加圆角矩形

1. 将形状类型改为"矩形"
2. 设置参数：
   ```
   宽度 (矩形): 0.6
   高度 (矩形): 0.4
   圆角半径 (矩形): 50
   ```
3. 看到平滑的圆角矩形

### 第三步：组合多个形状

1. 创建第一个遮罩（圆形）
2. 添加第二个"遮罩生成器"节点
3. 将第一个遮罩连接到第二个的"输入遮罩"
4. 设置"操作模式"为"叠加"
5. 选择矩形，调整参数
6. 两个形状合并成一个遮罩！

---

## 📚 常用工作流

### 工作流 1：简单遮罩生成

```
遮罩生成器 → 遮罩预览
```

**用途**: 快速创建单个形状遮罩

---

### 工作流 2：遮罩调整

```
遮罩生成器 → 遮罩尺寸调整 → 遮罩预览
```

**用途**: 创建遮罩后调整尺寸和位置

---

### 工作流 3：遮罩变换

```
遮罩生成器 → 遮罩变换 → 遮罩预览
```

**用途**: 旋转、翻转、缩放遮罩

---

### 工作流 4：复杂形状组合

```
遮罩生成器(圆形) ┐
                 ├→ 遮罩生成器(叠加模式) → 遮罩预览
遮罩生成器(矩形) ┘
```

**用途**: 组合多个基础形状创建复杂遮罩

---

### 工作流 5：批量处理

```
加载图片 → 分割遮罩 → 多遮罩选择器 → 单独处理
```

**用途**: 从一个图片中分离并处理多个遮罩区域

---

### 工作流 6：遮罩对比

```
目标遮罩 ┐
         ├→ 遮罩比较节点 → 评分
生成遮罩 ┘
```

**用途**: 评估生成的遮罩与目标的相似度

---

## 💡 实用技巧

### 技巧 1：创建完美圆角矩形

```yaml
形状类型: 矩形
宽度 (矩形): 0.5
高度 (矩形): 0.5
圆角半径 (矩形): 100  # 大圆角
抗锯齿强度: 高质量     # 平滑边缘
```

### 技巧 2：创建渐变遮罩用于柔和过渡

```yaml
形状类型: 渐变
渐变类型: 径向
反转渐变: 否
羽化边缘: 0  # 渐变本身已经是平滑的
```

### 技巧 3：创建随机有机纹理

```yaml
形状类型: 噪声
噪声类型: 柏林噪声
噪声强度: 0.7
噪声缩放: 8.0  # 值越大，细节越多
```

### 技巧 4：精确对齐遮罩

```yaml
使用遮罩尺寸调整节点：
基准方式: 画布尺寸
对齐方式: 居中
保持宽高比: 是
边缘留白: 20  # 四周留白
```

### 技巧 5：批量选择特定遮罩

```yaml
使用多遮罩选择器：
排序方向: 按面积
选择模式: 范围选择
遮罩索引: 0  # 从最大的开始
选择数量: 3  # 选前3个
最小面积: 100  # 过滤小遮罩
```

---

## ⚠️ 常见问题

### Q1: 为什么参数调整后没有效果？

**A**: 检查参数名称后面的标签，例如"半径 (圆形/多边形/星形)"只在选择了对应形状时生效。

### Q2: 如何获得最佳的边缘质量？

**A**: 
1. 使用"抗锯齿强度"设置为"高质量"或"超高质量"
2. 适当增加"羽化边缘"值（推荐 2-5）
3. 对于矩形，使用圆角半径可以获得更平滑的边缘

### Q3: 如何创建复杂的不规则形状？

**A**: 使用"操作模式"组合多个基础形状：
- 叠加：合并形状
- 相交：取重叠部分
- 差集：从第一个形状减去第二个
- 排除：只保留不重叠的部分

### Q4: 遮罩尺寸和位置不对怎么办？

**A**: 使用"遮罩尺寸调整"节点：
1. 设置目标宽度和高度
2. 选择合适的对齐方式
3. 使用"保持宽高比"避免变形

### Q5: 如何批量处理多个遮罩？

**A**: 使用"多遮罩选择器"节点：
1. 连接包含多个遮罩的输入
2. 选择排序方式
3. 使用循环或批处理节点逐个处理

---

## 🎯 最佳实践

### 1. 参数调整顺序

建议按以下顺序调整参数：

1. **形状类型** - 先确定要创建什么形状
2. **基础参数** - 设置尺寸、位置
3. **特殊参数** - 圆角、旋转等
4. **边缘处理** - 羽化和抗锯齿
5. **最终调整** - 反转遮罩等

### 2. 性能优化

- 对于大尺寸遮罩（>2048），考虑使用"标准"抗锯齿而非"超高质量"
- 噪声缩放值不要过大（建议 5-10），避免计算过慢
- 批量处理时，先用小尺寸测试参数

### 3. 质量控制

- 始终连接"遮罩预览"节点查看结果
- 使用"遮罩比较节点"验证生成质量
- 保存好用的参数组合为预设

---

## 📖 深入学习

准备好深入了解？查看：

- [完整参数参考](../README.md#参数说明) - 所有参数的详细说明
- [节点功能详解](../README.md#节点列表) - 每个节点的详细功能
- [高级技巧](../README.md#使用技巧) - 更多高级用法

---

## 🤝 需要帮助？

- 提交 Issue: [GitHub Issues](https://github.com/your-repo/haigc_mask/issues)
- 查看示例: `examples/` 文件夹
- 社区讨论: ComfyUI 论坛

---

**祝你创作愉快！** 🎨

